/*!
 * wwt
 * 
 * @author Gabriel Almeida
 * @version 1.0
 * Copyright 2018. MIT licensed.
 */
!function($){var m=!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))),l={ab:"Abkhaz",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari",bi:"Bislama",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan; Valencian",ch:"Chamorro",ce:"Chechen",ny:"Chichewa; Chewa; Nyanja",zh:"Chinese",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi; Dhivehi; Maldivian;",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fula; Fulah; Pulaar; Pular",gl:"Galician",ka:"Georgian",de:"German",el:"Greek, Modern",gn:"Guaraní",gu:"Gujarati",ht:"Haitian; Haitian Creole",ha:"Hausa",he:"Hebrew (modern)",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",ia:"Interlingua",id:"Indonesian",ie:"Interlingue",ga:"Irish",ig:"Igbo",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut, Greenlandic",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ki:"Kikuyu, Gikuyu",rw:"Kinyarwanda",ky:"Kirghiz, Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",ku:"Kurdish",kj:"Kwanyama, Kuanyama",la:"Latin",lb:"Luxembourgish, Letzeburgesch",lg:"Luganda",li:"Limburgish, Limburgan, Limburger",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",gv:"Manx",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Māori",mr:"Marathi (Marāṭhī)",mh:"Marshallese",mn:"Mongolian",na:"Nauru",nv:"Navajo, Navaho",nb:"Norwegian Bokmål",nd:"North Ndebele",ne:"Nepali",ng:"Ndonga",nn:"Norwegian Nynorsk",no:"Norwegian",ii:"Nuosu",nr:"South Ndebele",oc:"Occitan",oj:"Ojibwe, Ojibwa",cu:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",om:"Oromo",or:"Oriya",os:"Ossetian, Ossetic",pa:"Panjabi, Punjabi",pi:"Pāli",fa:"Persian",pl:"Polish",ps:"Pashto, Pushto",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Kirundi",ro:"Romanian, Moldavian, Moldovan",ru:"Russian",sa:"Sanskrit (Saṁskṛta)",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sm:"Samoan",sg:"Sango",sr:"Serbian",gd:"Scottish Gaelic; Gaelic",sn:"Shona",si:"Sinhala, Sinhalese",sk:"Slovak",sl:"Slovene",so:"Somali",st:"Southern Sotho",es:"Spanish; Castilian",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",bo:"Tibetan Standard, Tibetan, Central",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga (Tonga Islands)",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur, Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",wo:"Wolof",fy:"Western Frisian",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang, Chuang"},c=Object.keys(l),s={parse:function(t){var r,e,s,a,n,i=[],l=0,p=0;for(r=t.split(/(?:\r\n|\r|\n)/gm),a=this._.c(r)+1,l=0;l<a;l++){for(n={},s=[],l=this._.b(r,l),n.id=parseInt(r[l++],10),e=r[l++].split(/[\t ]*-->[\t ]*/),n.start=this._.a(e[0]),-1!==(p=e[1].indexOf(" "))&&(e[1]=e[1].substr(0,p)),n.end=this._.a(e[1]);l<a&&r[l];)s.push(r[l++]+" ");n.text=s.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),n.text=n.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),n.text=n.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),n.text=n.text.replace(/\\N/gi,"<br />"),i.push(n)}return i},_:{a:function(t){var r=t.split(":");try{var e=r[2].split(",");return 1===e.length&&(e=r[2].split(".")),3600*parseFloat(r[0],10)+60*parseFloat(r[1],10)+parseFloat(e[0],10)+parseFloat(e[1],10)/1e3}catch(t){return 0}},b:function(t,r){for(var e=r;!t[e];)e++;return e},c:function(t){for(var r=t.length-1;0<=r&&!t[r];)r--;return r}}},b=function(B){var t,a=B<0,e=["B","kB","MB","GB","TB","PB","EB","ZB","YB"];return a&&(B=-B),B<1?(a?"-":"")+B+" B":(t=Math.min(Math.floor(Math.log(B)/Math.log(1e3)),e.length-1),(a?"-":"")+(B=Number((B/Math.pow(1e3,t)).toFixed(2)))+" "+e[t])},x=function(s){var _=c.length;for(let i=0;i<_;i++)if(-1!=s.indexOf(`.${c[i]}.`))return l[c[i]];return!1},k=function(e){return $(e.currentTarget)};$(document).ready(function(){$("body").animate({top:0,opacity:1},{duration:850,complete:function(){$("footer").animate({bottom:0,opacity:1},450)}});var n={i:M.Modal.init(document.querySelector(".modal.confirm"),{opacity:.8,preventScrolling:!1,dismissible:!1,endingTop:"20%"}),d:{t:"",x:"",f:"Yes, I'm sure!",r:"Cancel",c:null,e:null,a:null},open:function(o){o=$.extend(this.d,o),resolved=function(callback,event){"function"==typeof callback&&callback.call(n.i,event),"function"==typeof o.a&&o.a.call(n),n.i.close()},this.i.$el.find(".modal-content h4").html(o.t),this.i.$el.find(".modal-content p").html(o.x),this.i.$el.find('.modal-footer button[data-action="confirm"]').text(o.f).on("click",e=>resolved(o.c,e)),this.i.$el.find('.modal-footer button[data-action="cancel"]').text(o.r).on("click",e=>resolved(o.e,e)),n.i.open()}},u={i:M.Modal.init(document.querySelector(".modal.torrent-utils"),{opacity:.8,dismissible:!0}),e:{tbody:null},t:function(n,t){return`<tr><td>${n}</td><td>${t}</td></tr>`},d:function(t){this.e.tbody.html(this.t("Name",t.name)+this.t("Size",b(t.length))+this.t("Hash",t.infoHash)+this.t("MagnetURI",`<input style="cursor:pointer" type="text" onclick="this.select();document.execCommand('copy');this.blur();M.toast({html:'MagnetURI copied to clipboard'});" value="${t.magnetURI}" />`))},o:function(){this.i.open()},b:function(){return this.e.tbody=$(this.i.$el).find("table tbody"),this}}.b();m||($(".tooltipped").tooltip(),$.each($(".tooltipped-footer").tooltip(),(k,e)=>{$(M.Tooltip.getInstance(e).tooltipEl).addClass("red")}));var a={w:{t:{h:null,i:null},c:null,d:function(i){if(this.t.i=i,this.s()){function v(){a.h.y(),a.w.init(),a.w.t.h=null,$(".return-watch").addClass("hide"),a.h.o.s.reset();var rt=a.h.o.a._.el.b.filter('[data-action="restart"]');1==rt.length&&rt.attr({"data-action":"stop","data-tooltip":"Stop streaming"}).find("i").html("stop"),a.w.c.add(i)}this.c.destroyed?v():this.c.destroy(v)}else a.w.c.add(i)},s:function(){return null!==this.t.h},f:function(t){var j=[];t.files.forEach(file=>{file.name.endsWith(".srt")&&j.push(file)}),j.forEach((file,index)=>{file.getBlobURL(function(err,url){if(err)throw err;var track=a.h.p.addTextTrack("subtitles",x(file.name)||file.name.replace(".srt",""));$.get(url,_=>{var f=s.parse(_);for(let i=0;i<f.length;i++)track.addCue(new VTTCue(f[i].start,f[i].end,f[i].text))})})})},_:{f:function(t){a.w.t.h=t.infoHash,a.h.v||a.h.s(),u.d(t),a.w.f(t);var file=t.files.find(function(file){return file.name.endsWith(".mp4")});file.renderTo(a.h.p.children_[0]);var fileExt=file.name.split(".").pop();function onProgress(){var remaining;a.h.o.c&&(remaining=((remaining=moment.duration(t.timeRemaining/1e3,"seconds").humanize())[0].toUpperCase()+remaining.substring(1)).split(" "),a.h.o.s.update({downloaded:b(t.downloaded),percentComplete:Math.round(100*t.progress*100)/100,numPeers:t.numPeers,speed:{download:b(t.downloadSpeed)+"/s",upload:b(t.uploadSpeed)+"/s"},remaining:{time:remaining[0],type:remaining[1]}}))}a.h.o.t(file.name.replace("."+fileExt,""),fileExt),a.h.o.s.setLengthDownload(b(t.length)),a.h.o.s.v.c(),a.h.o.s.v.s(onProgress,500),t.on("upload",()=>{a.h.o.s.setUploaded(b(t.uploaded)+" uploaded")}),t.on("done",()=>{onProgress(),a.h.o.s.done()})},r:function(err){v.e()}},init:function(){this.c=new WebTorrent,this.c.on("torrent",this._.f),this.c.on("error",this._.r)}},h:{$el:null,p:null,u:null,v:!1,s:function(){this._.v(!0)},h:function(){this._.v(!1)},o:{$el:null,c:!0,t:function(t,e){this._.el.t.text(t).attr("data-extension",e)},a:{$el:null,g:{home:function(){a.h.p.paused()||a.h.p.pause(),a.h.h()},utils:function(){u.o()},stop:function(){a.h.o.s.v.c(),$(this).attr({"data-action":"restart","data-tooltip":"Restart streaming"}).find("i").html("play_arrow"),a.w.c.torrents[0].destroy()},restart:function(){var e=$(this),d=function(){a.h.y(),a.h.o.s.reset(),setTimeout(()=>{a.w.d(a.w.t.i)},50),e.attr({"data-action":"stop","data-tooltip":"Stop streaming"}).find("i").html("stop")};a.h.o.s.s.d?n.open({t:"Restart streaming",x:"Torrent already downloaded, do you want to restart?",c:()=>{d()}}):d()}},_:{el:{b:null},setElements:function(el){this.el.b=el.find("ul li a")}},init:function(el){this.$el=el,this._.setElements(el),this._.el.b.on("click",e=>{e.preventDefault(),setTimeout(()=>{e.currentTarget.blur(),M.Tooltip.getInstance(e.currentTarget).tooltipEl.removeAttribute("style")},25);var y=e.currentTarget.dataset.action,r=a.h.o.a.g[y];"function"==typeof r&&("home"==y||a.w.s())&&r.call(e.currentTarget)})}},s:{$el:null,v:{i:null,s:function(f,t){null!==this.i&&this.clear(),this.i=setInterval(f,t)},c:function(){clearInterval(this.i),this.i=null}},s:{d:!1,f:!1},done:function(){this.s.d=!0,this._.el.s.d.c.text("0 B/s"),this._.el.r.d.css("color","#4caf50").parent().find("small,code.total").addClass("hide"),this._.el.s.r.css("color","#4caf50").html("done"),this._.el.p.d.css("background-color","#4caf50")},setLengthDownload:function(t){this._.el.r.t.text(t)},setUploaded:function(d){this._.el.s.u.c.parent().attr("data-uploaded",d)},update:function(d){this._.el.s.n.html(`${d.numPeers}<br><small>${d.numPeers>1?"peers":"peer"}</small>`),this._.el.s.u.c.text(d.speed.upload),this.s.d||(this._.el.s.d.c.text(d.speed.download),this._.el.r.d.text(d.downloaded),this._.el.p.d.css("width",d.percentComplete+"%"),this._.el.s.r.html(`${d.remaining.time}<br><small>${d.remaining.type} remaining</small>`))},reset:function(){this.v.c(),this.s.d=!1,this._.el.s.u.c.parent().removeAttr("data-uploaded"),this._.el.r.d.css("color","#ef474c").parent().find("small,code.total").removeClass("hide"),this._.el.p.d.removeAttr("style"),this._.el.s.r.removeAttr("style"),this.setLengthDownload(0),this.update({downloaded:0,percentComplete:100,numPeers:0,speed:{download:"0 B/s",upload:"0 B/s"},remaining:{time:0,type:"minutes"}})},_:{el:{t:null,p:{d:null},r:{d:null,t:null},s:{n:null,d:{c:null},u:{c:null},r:null}},e:function(el){this.el.p.d=el.find(".progress .determinate"),this.el.r.d=el.find(".received .downloaded"),this.el.r.t=el.find(".received .total"),this.el.s.n=el.find(".speed .numPeers"),this.el.s.d.c=el.find(".speed .download code"),this.el.s.u.c=el.find(".speed .upload code"),this.el.s.r=el.find(".speed .remaining")}},init:function(el){this.$el=el,this._.e(el)}},_:{el:{t:null,a:null},e:function(el){this.el.t=el.find(".title"),this.el.a=el.find(".action")}},init:function(el){this.$el=el,this._.e(el),this.a.init(el.find(".action")),this.s.init(el.find(".statistics"))}},_:{v:function(s){var r=s?["hidden",0,"-100%",0]:["auto","-100%",0,1];a.h.$el.animate({right:r[1]},650),s&&m?a.h.o.$el.addClass("mobile"):s&&!m&&$(a.h.p.el_).addClass("perspective"),$("header,main,footer").animate({left:r[2]},650),setTimeout(()=>{s&&v.e(),$("body").css("overflow",r[0]),a.w.s()&&$(".return-watch")[`${s?"add":"remove"}Class`]("hide")},s?0:650),a.h.v=s}},z:function(){this.$el.append(`<video id="player" class="video-js${m?"":" perspective"}"></video>`),this.p=videojs("player",{controls:!0,autoplay:!1}),this.p.on("fullscreenchange",function(){a.h.p.trigger(a.h.o.c?"play":"pause",{})}),this.p.on("pause",function(e,d){a.h.p.isFullscreen()||(a.h.u=setTimeout(()=>{a.h.o.$el.addClass("visible"),m||$(a.h.p.el_).addClass("perspective"),a.h.o.c=!0,a.h.u=null},250))}),this.p.on("play",function(e,d){void 0===d&&a.h.p.isFullscreen()||(null!==a.h.u&&clearTimeout(a.h.u),a.h.o.$el.removeClass("visible"),m||$(a.h.p.el_).removeClass("perspective"),a.h.o.c=!1)})},y:function(){this.p.dispose(),this.z()},init:function(){this.$el=$("#watch"),this.z(),this.o.init(this.$el.find(".overview"))}},r:function(){return this.h.init(),this.w.init(),this}}.r();$(".return-watch").on("click",e=>null!==a.w.t.h?a.h.s():k(e).addClass("hide"));var w=$("main .starting");w.f=w.find(".with-file input.target"),w.l=w.find(".loader");var v={t:{i:null,s:function(){this.i=setTimeout(()=>{v.t.o()},3e4)},c:function(){clearTimeout(this.i),this.i=null},o:function(){this.i=!0,a.w.c.torrents.length>0&&a.w.c.torrents[0].destroy(),w.l.find(".timeout").removeClass("hide").find("button").off("click").on("click",e=>{v.t.a(e.currentTarget.dataset.action)}),w.l.find(".preloader-wrapper").removeClass("active")},a:function(i){switch(i){case"try":a.w.d(a.w.t.i),v.s();break;case"cancel":v.e();break;default:location.reload()}}},s:function(){!0===this.t.instance&&(w.l.find(".timeout").addClass("hide"),w.l.find(".preloader-wrapper").addClass("active")),w.l.removeClass("hide"),this.t.s()},e:function(){this.t.c(),w.l.addClass("hide"),w.l.find(".timeout").addClass("hide"),w.l.find(".preloader-wrapper").addClass("active")}};w.find(".with-magnet input.target").on("paste",e=>{setTimeout(()=>{var _g=e.currentTarget.value;""!==_g&&("magnet:?"===_g.substring(0,8)?/^magnet:\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+$/gi.test(_g)?(k(e).trigger("validate",[!0]).blur().val("").parent().find("label").removeClass("active"),a.w.s()?n.open({t:"Torrent in progress",x:"Already exists a torrent in progress, do you want to cancel and start a new one?",c:()=>{v.s(),a.w.d(_g)}}):(v.s(),a.w.d(_g))):k(e).trigger("validate",[!1,"This magnet is invalid!"]):k(e).trigger("validate",[!1,"Is not a magnet!"]))},0)}).on("blur",e=>{""===k(e).val()&&k(e).trigger("validate",[!0])}).on("validate",function(e,b,t){k(e)[`${b?"remove":"add"}Class`]("invalid").parent().find("span.helper-text").attr("data-error",b?"":t)}),w.find(".with-file a.target").on("click",e=>{e.preventDefault(),window.File&&window.FileReader&&window.FileList&&window.Blob?w.f.trigger("click"):(k(e).addClass("disabled"),M.toast({html:"The File APIs are not fully supported in this browser.<br>Try with magnet link."}))}),w.f.on("change",e=>{a.w.s()?n.open({t:"Torrent in progress",x:"Already exists a torrent in progress, do you want to cancel and start a new one?",c:()=>{a.w.d(e.target.files[0])},a:()=>{k(e).val("")}}):(a.w.d(e.target.files[0]),k(e).val(""))})})}(jQuery);